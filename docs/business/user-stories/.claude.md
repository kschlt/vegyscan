# User Stories - AI Instructions

## Purpose

User stories describe features from the user perspective in a concise, agile format.

## File Structure

**All stories in ONE file:** `stories.md`

Why one file?
- Easy to scan all stories
- Simple cross-referencing
- Clear epic grouping
- No fragmentation

## Story Format

```markdown
### US-XXX: [Short title]

**As a** [persona],
**I want to** [action],
**so that** [benefit].

**Acceptance Criteria:**
- [ ] [Testable criterion 1]
- [ ] [Testable criterion 2]

**Related:**
- Use Case: [UC-YYY](../use-cases/UC-YYY-name.md)
- Requirements: [REQ-F-ZZZ](../requirements/functional.md#req-f-zzz)
```

## Creating User Stories

### Process
1. Open `stories.md`
2. Find appropriate Epic section (or create new)
3. Add story with next US-XXX number
4. Write in user voice (avoid technical jargon)
5. Add 3-5 testable acceptance criteria
6. Link to related use case
7. Link to requirements

### Numbering
- Sequential across all epics: US-001, US-002, ..., US-012, ...
- ✅ US-001, US-002, US-010
- ❌ US-Epic1-1, US-Epic2-1 (no sub-numbering)

## Epic Organization

Group related stories under Epic headings:

```markdown
## Epic: [Epic Name]

### US-001: ...
### US-002: ...

## Epic: [Another Epic]

### US-003: ...
```

## Content Rules

**Include:**
- ✅ User perspective ("I want to scan ingredients")
- ✅ Business value ("so that I know if product is vegan")
- ✅ Testable acceptance criteria
- ✅ Links to detailed use cases
- ✅ Links to personas

**Exclude:**
- ❌ Implementation details ("using React Native camera API")
- ❌ Technical requirements (→ requirements/non-functional.md)
- ❌ UI mockups (→ architecture/diagrams/)

## Acceptance Criteria Rules

Each criterion must be:
- **Testable**: Can verify if done
- **Specific**: Clear, no ambiguity
- **User-focused**: Describes outcome, not implementation

**Good:**
- ✅ "Scan completes within 2 seconds"
- ✅ "App works offline with cached data"
- ✅ "User sees list of all E-numbers with names"

**Bad:**
- ❌ "Code is well-tested" (too vague)
- ❌ "Uses Redux for state management" (implementation)
- ❌ "Works fast" (not measurable)

## Updating Stories

### Allowed
- ✅ Add acceptance criteria
- ✅ Refine wording for clarity
- ✅ Add cross-references
- ✅ Mark as done/implemented

### Requires care
- ⚠️ Changing benefit statement (might indicate new story needed)
- ⚠️ Removing acceptance criteria (check if implemented features affected)

## Cross-References

Always link to SoT:
- Personas: `../personas.md#persona-id`
- Use Cases: `../use-cases/UC-XXX-name.md`
- Requirements: `../requirements/functional.md#req-id`

## Story States

Add status tag after title:

- `[Draft]` - Being written
- `[Ready]` - Refined and ready for development
- `[In Progress]` - Being implemented
- `[Done]` - Implemented and accepted
- `[Deprecated]` - No longer relevant
